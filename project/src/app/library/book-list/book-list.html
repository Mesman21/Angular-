<div class="library-container">
    
    <h1 class="library-title">–í–∞—à–∞ –û–Ω–ª–∞–π–Ω-–ë—ñ–±–ª—ñ–æ—Ç–µ–∫–∞</h1>
    
    <div class="page-layout"> 
        
        <div class="sidebar">
            <h3>–ö–∞—Ç–µ–≥–æ—Ä—ñ—ó</h3>
            
            <div class="category-filters">
                <ul>
                    <li *ngFor="let category of bookService.categories">
                        <a 
                            (click)="filterBooks(category)"
                            [class.active]="isCategorySelected(category)"
                            class="filter-link"
                        >
                            {{ category }}
                        </a>
                    </li>
                </ul>
            </div>
            
            <button (click)="openModal()" class="add-book-button-sidebar">
                –î–æ–¥–∞—Ç–∏ –Ω–æ–≤—É –∫–Ω–∏–≥—É üìö
            </button>

            <hr>
            <p>–¢—É—Ç –±—É–¥–µ —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª —Ñ—ñ–ª—å—Ç—Ä–∞—Ü—ñ—ó</p>
        </div>

        
        <div class="main-content">
    
            <div class="book-grid">
                <div *ngFor="let book of filteredBooks" class="book-card">
                    <div class="book-content-wrapper">
                        <div class="book-cover-container">
                            <img *ngIf="book.imageUrl" [src]="book.imageUrl" [alt]="book.title" class="book-cover">
                            <div *ngIf="!book.imageUrl" class="no-photo">–û–±–∫–ª–∞–¥–∏–Ω–∫–∞ –≤—ñ–¥—Å—É—Ç–Ω—è</div>
                        </div>
                        <div class="book-content-wrapper"></div>
                        <h3 class="book-title">{{ book.title }}</h3>
                        <p class="book-author">–ê–≤—Ç–æ—Ä: {{ book.author }}</p>
                        <p class="excerpt">{{ book.excerpt }}</p>
                        
                        <div class="card-actions"> 
                            <a 
                                [routerLink]="['/read', book.id]" 
                                class="submit-button read-action-button"
                            >
                                –ß–∏—Ç–∞—Ç–∏ ‚Üí
                            </a>
                        
                            <button 
                                (click)="confirmDelete(book.id, book.title)" 
                                class="cancel-button delete-action-button"
                            >
                                –í–∏–¥–∞–ª–∏—Ç–∏
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div *ngIf="isModalOpen" class="modal-overlay">
    <div class="modal-content">
        
        <div class="modal-header">
            <h2 class="modal-title">–î–æ–¥–∞—Ç–∏ –Ω–æ–≤—É –∫–Ω–∏–≥—É –¥–æ –±—ñ–±–ª—ñ–æ—Ç–µ–∫–∏</h2>
            <button (click)="closeModal()" class="close-button">&times;</button>
        </div>

        <div class="disclaimer">
            <p>‚ö†Ô∏è **–£–≤–∞–≥–∞:** –î–ª—è –∫–æ—Ä–µ–∫—Ç–Ω–æ—ó —Ä–æ–±–æ—Ç–∏ –ø–∞–≥—ñ–Ω–∞—Ü—ñ—ó, –≤–∏ –ø–æ–≤–∏–Ω–Ω—ñ –≤—Å—Ç–∞–≤–∏—Ç–∏ –ø–æ–≤–Ω–∏–π —Ç–µ–∫—Å—Ç –∫–Ω–∏–≥–∏ —É –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω–µ –ø–æ–ª–µ.</p>
            <p>–°–∏—Å—Ç–µ–º–∞ —Ä–æ–∑—ñ–±'—î —Ç–µ–∫—Å—Ç –Ω–∞ —Å—Ç–æ—Ä—ñ–Ω–∫–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ. **–ú—ñ–Ω—ñ–º—É–º 50 —Å–∏–º–≤–æ–ª—ñ–≤.**</p>
        </div>

        <form #bookForm="ngForm" (ngSubmit)="submitBook()">
            <div class="form-group">
                <label for="title">–ù–∞–∑–≤–∞ –∫–Ω–∏–≥–∏:</label>
                <input id="title" [(ngModel)]="newBook.title" name="title" required #title="ngModel">
                <div *ngIf="title.invalid && title.touched" class="validation-error">–ü–æ–ª–µ –æ–±–æ–≤'—è–∑–∫–æ–≤–µ.</div>
            </div>

            <div class="form-group">
                <label for="author">–ê–≤—Ç–æ—Ä:</label>
                <input id="author" [(ngModel)]="newBook.author" name="author" required #author="ngModel">
                <div *ngIf="author.invalid && author.touched" class="validation-error">–ü–æ–ª–µ –æ–±–æ–≤'—è–∑–∫–æ–≤–µ.</div>
            </div>

            <div class="form-group">
                <label for="imageUrl">–û–±–∫–ª–∞–¥–∏–Ω–∫–∞ (–≤–∏–±—ñ—Ä —ñ–∑ –¥–æ—Å—Ç—É–ø–Ω–∏—Ö):</label>
                <select id="imageUrl" [(ngModel)]="newBook.imageUrl" name="imageUrl">
                    <option *ngFor="let img of availableImages" [value]="img.url">{{ img.name }}</option>
                </select>
                <small>–ó–æ–±—Ä–∞–∂–µ–Ω–Ω—è –±–µ—Ä—É—Ç—å—Å—è –∑ –ø—É–±–ª—ñ—á–Ω–æ—ó –ø–∞–ø–∫–∏ –ø—Ä–æ–µ–∫—Ç—É.</small>
            </div>


            <div class="form-group">
                <label for="category">–ö–∞—Ç–µ–≥–æ—Ä—ñ—è:</label>
                <select id="category" [(ngModel)]="newBook.category" name="category" required>
                    <option *ngFor="let cat of availableCategories" [value]="cat">{{ cat }}</option>
                </select>
            </div>
            
            <div class="form-group">
                <label for="excerpt">–ö–æ—Ä–æ—Ç–∫–∏–π –æ–ø–∏—Å (Excerpt):</label>
                <textarea id="excerpt" [(ngModel)]="newBook.excerpt" name="excerpt" rows="2" required #excerpt="ngModel"></textarea>
                <div *ngIf="excerpt.invalid && excerpt.touched" class="validation-error">–ü–æ–ª–µ –æ–±–æ–≤'—è–∑–∫–æ–≤–µ.</div>
            </div>

            <div class="form-group large-text-area">
                <label for="fullText">–ü–æ–≤–Ω–∏–π —Ç–µ–∫—Å—Ç –∫–Ω–∏–≥–∏:</label>
                <textarea id="fullText" [(ngModel)]="newBook.fullText" name="fullText" rows="10" required minlength="50" #fullText="ngModel"></textarea>
                <small>–í—Å—Ç–∞–≤—Ç–µ —Å—é–¥–∏ –≤–µ—Å—å —Ç–µ–∫—Å—Ç, –ø–∞–≥—ñ–Ω–∞—Ü—ñ—è –±—É–¥–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ—é.</small>
                <div *ngIf="fullText.invalid && fullText.touched" class="validation-error">–¢–µ–∫—Å—Ç –æ–±–æ–≤'—è–∑–∫–æ–≤–∏–π, –º—ñ–Ω—ñ–º—É–º 50 —Å–∏–º–≤–æ–ª—ñ–≤.</div>
            </div>

            <div class="form-actions">
                <button type="button" (click)="closeModal()" class="cancel-button">–°–∫–∞—Å—É–≤–∞—Ç–∏</button>
                <button type="submit" class="submit-button" [disabled]="bookForm.invalid">–î–æ–¥–∞—Ç–∏ –∫–Ω–∏–≥—É</button>
            </div>
        </form>
    </div>
</div>